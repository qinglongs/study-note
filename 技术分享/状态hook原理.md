> useState 原理

- 作用：
  - 使 function 组件也有能力管理自己的状态。
- 原理：
  - 将需要维护状态挂载在 fiber 对象上，利用 fiber 的双缓冲技术实现状态复用。

> useState 小问题

1. 为什么多次调用 setState 只会触发一次更新？

- react 在注册调度任务时会有一个节流和防抖的操作。
  - 节流：新旧任务优先级相同，就不需要注册新的任务，直接沿用之前的任务。
  - 防抖：新旧任务优先级不同，取消旧的任务注册新的任务。

2. setState 是同步还是异步。

- 如果调用 setState 触发更新时当前执行上下文为空，就不会去注册调度任务 ，而是直接去构造 fiber 树，这时 setState 就表现为同步。
- 正常调用 setState 的表现都是异步的。

3. 为什么 setState 同一个引用值/相等的基础类型值不会触发更新？

- 在调用 setState(xxx) 时，react 会先去检查当前更新的值和上一次更新的结果是否相等，如果相等就不会触发更新调度。
